# Тестовое задание: Frontend Developer (React + Next.js)

## Цель задания

Проверить, как кандидат проектирует frontend для финансово-чувствительного продукта:
- архитектурное мышление в Next.js;
- безопасность клиентской части;
- производительность и UX в критичных пользовательских флоу;
- качество аргументации технических решений.

## Контекст

Есть упрощенный сценарий вывода средств в продукте с крипто-механиками.  
Нужно реализовать интерфейс страницы `Withdraw`, интегрированной с REST API.

## Что нужно сделать

Собрать мини-приложение на Next.js (App Router, TypeScript), которое включает:
1. Форму создания заявки на вывод.
2. Отображение статусов заявки.
3. Обработку повторной отправки (идемпотентность на клиенте).
4. Базовую защиту UI от типичных ошибок и уязвимых паттернов.

## Функциональные требования

### 1) Страница Withdraw

Поля формы:
- `amount` (decimal, > 0);
- `destination` (строка);
- `confirm` (checkbox: пользователь подтверждает действие).

Кнопка `Submit` активна только при валидной форме.

### 2) Интеграция с API

Использовать следующие endpoint (можно замокать локально):
- `POST /v1/withdrawals`
- `GET /v1/withdrawals/{id}`

Ожидаемое поведение:
- на submit отправляется `idempotency_key` (генерируется на клиенте);
- при `409 insufficient_funds` показать понятную ошибку;
- при сетевой ошибке дать retry без потери состояния формы;
- после успеха отобразить карточку заявки и ее статус.

### 3) Повторная отправка и устойчивость

- двойной клик по submit не должен приводить к дублям;
- при перезагрузке страницы в течение 5 минут пользователь должен видеть последнюю созданную заявку (любой разумный механизм хранения).

### 4) UI состояния

Обязательно реализовать:
- `idle`, `loading`, `success`, `error`;
- скелетон или другой loading-state для чтения статуса заявки;
- disabled-состояние submit во время запроса.

## Нефункциональные требования

### Архитектура

- Next.js App Router;
- TypeScript;
- состояние: Zustand или аналог (Redux Toolkit/Jotai и т.д.);
- аккуратное разделение UI, состояния и API-слоя.

### Безопасность

- не хранить access token в `localStorage` (если авторизация мокается, описать как было бы в реальном проекте);
- избегать небезопасного рендера HTML;
- продумать обработку ошибок так, чтобы не раскрывать внутренние детали сервера.

### Производительность

- не делать лишние запросы;
- минимизировать повторные рендеры в ключевых участках;
- коротко описать, что бы вы улучшили для Core Web Vitals в production.

## Дизайн и верстка

- Интерфейс не обязан быть "красивым", но должен быть аккуратным и консистентным.
- Pixel-perfect не требуется.
- Достаточно простого, чистого UI-kit уровня.

## Что нужно сдать

1. Исходный код.
2. `README.md` с разделами:
- как запустить;
- архитектурные решения;
- где и как обеспечена устойчивость к дублям;
- что сделано для безопасности и производительности.
3. Тесты.

## Тесты (минимум)

- unit-тесты для валидации и/или store-логики;
- интеграционный тест формы (успех + ошибка API);
- тест на защиту от двойного submit.

Допустимые инструменты:
- Vitest/Jest + Testing Library;
- Playwright/Cypress (опционально, как плюс).

## Технические ограничения

- Next.js 14+;
- TypeScript;
- без внешних UI-фреймворков уровня "готовый весь продукт";
- без необходимости реальной Web3-интеграции (можно mock).

## Объем и время

- Ориентир: 4-6 часов.
- Важнее качество решений и объяснений, чем количество экранов.

## Что можно упростить

- одна валюта (`USDT`);
- один пользователь;
- без истории операций (кроме последней заявки);
- без полноценной auth-системы (достаточно mock/заглушки с корректным описанием).
